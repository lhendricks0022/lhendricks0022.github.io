<!DOCTYPE html>
<html><head>  <meta charset="UTF-8">
    <title>Program 5 - Lisa Hendricks</title>
</head>
<body style='margin-left: 30px;'>

    <h1>Select a Major</h1>
        
    <input type="button" id='citbtn' value="CIT Majors">
    <input type="button" id='busbtn' value="Business Majors">

	<h3>We filter our dataset by major</h3>
             
 	<div id="result"></div>
    
<script>
   
    document.addEventListener('DOMContentLoaded', function() {    
									
		// CIT BUTTON 
    	document.querySelector('#citbtn').onclick = async function(){   
			var response = await fetch('cit5students.json');       // ajax GET request

			if(response.ok) {
				var data = await response.json();                // array of objects

				var cit_filter = data.filter(function(student) {
					return student.major == 'CIT';
				});

				var tableContents = "<table cellspacing='5'>"
				tableContents += "<tr><td>Name</td><td>Major</td><td>Midterm</td><td>Final</td></tr>";
									
            	for(i = 0; i < cit_filter.length; i++) {
                    tableContents += 
						`<tr><td> ${cit_filter[i].name} </td>
						<td> ${cit_filter[i].major} </td>
						<td> ${cit_filter[i].midterm} </td>
						<td> ${cit_filter[i].final} </td></tr>`;  // generate table using template literals
                }
				

                tableContents += "</table>";

                document.querySelector('#result').innerHTML = tableContents;
			}
			else {
				document.querySelector('#result').innerHTML = "Data not found";
			}	
    	};

		// END CIT BUTTON - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

		// BUSINESS BUTTON 
    	document.querySelector('#busbtn').onclick = async function(){   
			var response = await fetch('cit5students.json');       // ajax GET request

			if(response.ok) {
				var data = await response.json();                // array of objects

				var bus_filter = data.filter(function(student) {
					return student.major == 'BUS';
				});

				var tableContents = "<table cellspacing='5'>"
				tableContents += "<tr><td>Name</td><td>Major</td><td>Midterm</td><td>Final</td></tr>";
									
            	for(i = 0; i < bus_filter.length; i++) {
                    tableContents += 
						`<tr><td> ${cit_filter[i].name} </td>
						<td> ${bus_filter[i].major} </td>
						<td> ${bus_filter[i].midterm} </td>
						<td> ${bus_filter[i].final} </td></tr>`;  // generate table using template literals
                }
				

                tableContents += "</table>";

                document.querySelector('#result').innerHTML = tableContents;
			}
			else {
				document.querySelector('#result').innerHTML = "Data not found";
			}	
    	};

	
  	});
   
</script>
   
</body>
</html>
